(this.webpackJsonpaniguesser=this.webpackJsonpaniguesser||[]).push([[0],{106:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),u=n.n(c),i=(n(78),n(17)),s=n.n(i),o=n(21),l=n(12),j=n(57),f=n.n(j),b=(n(106),n(44)),m=n(157),d=n(158),v=n(7);function O(){return(O=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/tag.json?limit=25&type=3&order=count&name="+t.replaceAll(" ","_"));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.filter((function(e){return e.count>0})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(e){var t=e.on_guess_submitted,n=Object(r.useState)([]),a=Object(l.a)(n,2),c=a[0],u=a[1],i=Object(r.useState)(""),s=Object(l.a)(i,2),o=s[0],j=s[1];Object(r.useEffect)((function(){o?function(e){return O.apply(this,arguments)}(o).then(u):u([])}),[o]);return Object(v.jsx)("div",{id:"guess",children:Object(v.jsx)(d.a,{blurOnSelect:!0,disableClearable:!0,options:c,style:{width:300},getOptionLabel:function(e){return e.name.replaceAll("_"," ")},onChange:function(e,n){var r;return t(null!==(r=null===n||void 0===n?void 0:n.name)&&void 0!==r?r:"")},onInputChange:function(e,t){return j(t)},renderInput:function(e){return Object(v.jsx)(m.a,Object(b.a)(Object(b.a)({},e),{},{label:"Guess the title",variant:"filled"}))}})})},x=n(153),g=n(65),h=3e4,_=function(e){return 100*(h-e)/h},S=function(e,t){return(e+1)%t.count};var w,y=function(e){var t=e.tag,n=e.current_video,c=e.set_current_video,u=e.play_next_tag,i=Object(r.useState)(void 0),j=Object(l.a)(i,2),f=j[0],b=j[1],m=Object(r.useState)(0),d=Object(l.a)(m,2),O=d[0],p=d[1];Object(r.useEffect)((function(){var e=!0;return w({tag:t}).then((function(t){e&&c(t)})),function(){e=!1}}),[t,c]),Object(r.useEffect)((function(){var e=0;console.log("starting interval");var t=setInterval((function(){e>=h?(p(e=0),u()):p(e+=50)}),50);return function(){clearInterval(t),console.log("clearing interval")}}),[t]);var w=function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c,u,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tag,a=t.page,c=null!==(n=c=void 0===a?void 0:a)&&void 0!==n?n:Object(g.random)(r.count),u="/api/post.json?limit=1&page="+c+"&tags="+r.name,e.next=5,fetch(u);case 5:return i=e.sent,e.next=8,i.json();case 8:if(o=e.sent,!(s=o[0])||!s.file_url||"mp4"!==s.file_ext&&"webm"!==s.file_ext||!s.id){e.next=14;break}return b(c),e.abrupt("return",{url:o[0].file_url,id:o[0].id,tag:r});case 14:return e.abrupt("return",w({tag:r,page:S(c,r)}));case 15:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(x.a,{color:_(O)<25?"secondary":"primary",variant:"determinate",value:_(O),className:"controls timer"},t.id),Object(v.jsx)("video",{muted:!0,preload:"auto",autoPlay:!0,src:null===n||void 0===n?void 0:n.url,onEnded:function(){var e=S(f,t);w({tag:t,page:e}).then((function(e){c(e)}))}})]})},I=n(154),C=n(43),A=function(e){var t=e.guess_result;return void 0===t?null:t.correct_answer===t.guess?Object(v.jsxs)("p",{id:"guess-result",className:"controls correct",children:[t.correct_answer.replaceAll("_"," ")," \u2713"]}):t.guess?Object(v.jsxs)("div",{id:"guess-result",className:"controls wrong",children:[Object(v.jsx)("p",{id:"incorrect-guess",children:t.guess.replaceAll("_"," ")}),Object(v.jsx)("p",{children:t.correct_answer.replaceAll("_"," ")})]}):Object(v.jsx)("div",{id:"guess-result",className:"controls wrong",children:Object(v.jsx)("p",{children:t.correct_answer.replaceAll("_"," ")})})},E=function(e){var t=e.score,n=e.max_score;return Object(v.jsxs)("p",{id:"score",className:"controls",children:["Correct: ",t,"/",n]})};!function(e){e[e.GENERAL=0]="GENERAL",e[e.ARTIST=1]="ARTIST",e[e.COPYRIGHT=3]="COPYRIGHT",e[e.CHARACTER=4]="CHARACTER"}(w||(w={}));var R=3500,T=function(e){return 100*e/R};function k(){return(k=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/tag.json?limit=0&order=count&type="+w.COPYRIGHT);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.filter((function(e){return e.count>0})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=[{max:1e5,min:500},{max:1e5,min:500},{max:1e5,min:500},{max:500,min:100},{max:500,min:100},{max:500,min:100},{max:500,min:100},{max:500,min:100},{max:500,min:100},{max:100,min:25},{max:100,min:25},{max:100,min:25},{max:100,min:25},{max:25,min:10},{max:25,min:10},{max:25,min:10},{max:25,min:10},{max:1,min:1}],F=function(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)([]),i=Object(l.a)(u,2),s=i[0],o=i[1],j=Object(r.useState)([]),b=Object(l.a)(j,2),m=b[0],d=b[1],O=Object(r.useState)(!1),g=Object(l.a)(O,2),h=g[0],_=g[1],S=Object(r.useState)(!1),w=Object(l.a)(S,2),F=w[0],G=w[1],P=Object(r.useState)(Object(C.a)()),H=Object(l.a)(P,2),L=H[0],Y=H[1],B=Object(r.useState)(void 0),J=Object(l.a)(B,2),D=J[0],M=J[1],q=Object(r.useState)(0),z=Object(l.a)(q,2),K=z[0],Q=z[1],U=Object(r.useState)(0),V=Object(l.a)(U,2),W=V[0],X=V[1],Z=Object(r.useState)(void 0),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ne=Object(r.useState)(0),re=Object(l.a)(ne,2),ae=re[0],ce=re[1];Object(r.useEffect)((function(){var e=10;c(e);var t=setInterval((function(){e<90?c(e+=10):clearInterval(t)}),100);return function(){return k.apply(this,arguments)}().then((function(e){c(100),o(e)})),function(){return clearInterval(t)}}),[]),Object(r.useEffect)((function(){if(ee){ie(L);var e=0,t=setInterval((function(){e>=R?(te(void 0),e=0):e+=50,ce(e)}),50);return function(){return clearInterval(t)}}}),[L,ee]);var ue=function(){_(!1),d([])},ie=function(e){var t=0;e.forEach((function(e,n){(function(e,t){return e===t.name})(e,n)&&(t+=1)})),Q(t)};return Object(v.jsxs)(a.a.Fragment,{children:[ee&&Object(v.jsx)(x.a,{variant:"determinate",value:T(ae),className:"controls timer"},W),F&&Object(v.jsx)(E,{score:K,max_score:W}),0===s.length&&Object(v.jsx)(x.a,{variant:"determinate",value:n}),!h&&Object(v.jsx)(I.a,{variant:"contained",disabled:0===s.length,onClick:function(){var e;d((e=s,N.map((function(t){var n=t.max,r=t.min;return f()(e.filter((function(e){var t=e.count;return n>=t&&t>=r})))})))),_(!0),G(!0),Y(Object(C.a)()),Q(0),X(0)},id:"start",children:"Start"}),h&&m.length>0&&!ee&&Object(v.jsx)(y,{tag:m[W],current_video:D,set_current_video:M,play_next_tag:function(){var e=m[W];te(e),W+1<m.length?X(W+1):ue()}}),ee&&Object(v.jsx)(A,{guess_result:{guess:L.get(ee),correct_answer:ee.name}}),h&&!ee&&Object(v.jsx)(p,{on_guess_submitted:function(e){var t=m[W];if(t){var n=L.set(t,e);Y(n)}}})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,159)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))},P=n(156),H=n(66),L=n(155),Y=n(35),B=Object(H.a)({palette:{type:"dark",primary:L.a,secondary:Y.a}});u.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(P.a,{theme:B,children:Object(v.jsx)(F,{})})}),document.getElementById("root")),G()},78:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.7f90c762.chunk.js.map